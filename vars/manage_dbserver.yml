---
pg_postgres_conf_params:
  - name: listen_addresses
    value: "*"
pg_hba_ip_addresses:
  - contype: "host"
    users: "all"
    databases: "all"
    method: "scram-sha-256"
    source: "127.0.0.1/32"
    state: present
pg_slots:
  - name: "physical_slot"
    slot_type: "physical"
    state: present
  - name: "logical_slot"
    slot_type: "logical"
    output_plugin: "test_decoding"
    state: present
    database: "postgres"
pg_extensions:
  - name: "postgis"
    database: "postgres"
    state: present
pg_grant_privileges:
  - roles: "postgres_role"
    database: "postgres"
    privileges: execute
    schema: pg_catalog
    objects: pg_current_wal_lsn(),pg_last_wal_replay_lsn(),pg_wal_replay_resume(),pg_wal_replay_pause()
    type: function
pg_grant_roles:
  - role: pg_monitor
    user: postgres_user
pg_sql_scripts:
  - file_path: "/usr/postgres/sample.sql"
    db: postgres
pg_copy_files:
  - file: "./test.sh"
    remote_file: "/var/lib/postgres/test.sh"
    owner: postgres
    group: postgres
    mode: 0700
pg_query:
  - query: "Update test set a=b"
    db: postgres
pg_pgpass_values:
  - host: "127.0.0.1"
    database: postgres
    user: postgres_user
    password: <password>
    state: present
pg_databases:
  - name: another_postgres
    owner: postgres
    encoding: UTF-8
pg_tablespaces:
  - name: index_tablespace
    owner: postgres
    location: "/data/index_tablespace"
    state: present
